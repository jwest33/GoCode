# Task API Example - GoCode Walkthrough

## Overview

This example demonstrates GoCode's capabilities through building a complete **Task Management REST API** in Go. You'll learn how to leverage GoCode as an AI coding assistant to build a production-ready web service with database integration, comprehensive testing, and proper error handling.

## What You'll Build

A RESTful API for managing tasks with the following features:
- **CRUD operations** for tasks (Create, Read, Update, Delete)
- **SQLite database** with migrations
- **JSON API** endpoints with proper HTTP status codes
- **Error handling** middleware
- **Unit tests** with comprehensive coverage
- **Clean architecture** with separation of concerns

## What You'll Learn

### GoCode Capabilities
- **Basic Tools**: read, write, edit, glob, grep for file operations
- **Todo Management**: How the agent breaks down and tracks complex tasks
- **LSP Integration**: Code navigation using gopls (find definitions, references, symbols)
- **Session Checkpointing**: Resume work across multiple sessions
- **Long-term Memory**: Agent remembers design decisions and context
- **Bash Execution**: Running go commands, tests, and builds

### Software Engineering Skills
- RESTful API design principles
- Go project structure and best practices
- Database schema design and migrations
- Test-driven development
- Error handling patterns

## Prerequisites

Before starting, ensure you have:

1. **Go 1.23+** installed
   ```bash
   go version
   ```

2. **GoCode** installed and configured
   - Model path configured in `config.yaml`
   - llama-server working properly

3. **gopls** (Go Language Server) installed
   ```bash
   go install golang.org/x/tools/gopls@latest
   ```

4. **SQLite** (usually pre-installed on most systems)
   ```bash
   sqlite3 --version
   ```

## Quick Start

### 1. Create Your Project Directory

```bash
mkdir task-api-tutorial
cd task-api-tutorial
```

### 2. Configure GoCode for This Example

Copy the example configuration:

```bash
cp path/to/gocode/examples/task-api/.gocode-example-config.yaml config.yaml
```

Or manually enable these features in your `config.yaml`:
```yaml
lsp:
  enabled: true
  servers:
    go:
      command: "gopls"
      args: []

checkpoint:
  enabled: true
  db_path: "checkpoints.db"
  auto_save: true
  save_interval: 5

memory:
  enabled: true
  db_path: "memory.db"
```

### 3. Start the Walkthrough

Follow the detailed step-by-step guide in **[WALKTHROUGH.md](./WALKTHROUGH.md)**

The walkthrough is divided into 6 phases:
1. **Setup & Basic Tools** (~10 min)
2. **API Implementation** (~15 min)
3. **Database Integration** (~10 min)
4. **LSP-Powered Refactoring** (~10 min)
5. **Testing & Debugging** (~10 min)
6. **Session Management** (~5 min)

**Total time: ~60 minutes**

## Learning Path

### For Beginners
Start from Phase 1 and follow each step carefully. Copy and paste the exact prompts provided to see how GoCode responds and what it builds.

### For Experienced Users
Skim through the phases to understand the flow, then try prompting the agent in your own words. Experiment with variations to see how the agent adapts.

### For Advanced Users
Use this as a template to build your own examples. Try extending the API with authentication, rate limiting, or more complex features.

## Project Structure (After Completion)

```
task-api-tutorial/
├── cmd/
│   └── api/
│       └── main.go              # Entry point
├── internal/
│   ├── database/
│   │   ├── db.go                # Database connection
│   │   ├── migrations.go        # Schema migrations
│   │   └── queries.go           # SQL queries
│   ├── handlers/
│   │   ├── tasks.go             # HTTP handlers
│   │   └── middleware.go        # Error handling middleware
│   └── models/
│       └── task.go              # Task model and validation
├── tests/
│   ├── handlers_test.go         # Handler tests
│   └── database_test.go         # Database tests
├── go.mod
├── go.sum
├── README.md
└── TODO.md                      # Generated by GoCode's todo_write tool
```

## Expected Outcomes

By the end of this walkthrough, you will have:

1. ✅ A fully functional REST API built with GoCode's assistance
2. ✅ Understanding of how to prompt and guide the AI agent
3. ✅ Experience with GoCode's advanced features (LSP, checkpointing, memory)
4. ✅ Confidence to use GoCode on your own projects
5. ✅ A template for building similar Go web services

## Troubleshooting

### GoCode Issues

**"LSP not working"**
- Verify gopls is installed: `gopls version`
- Check `lsp.enabled: true` in config.yaml
- Ensure you're in a Go module directory (go.mod exists)

**"Session not resuming"**
- Verify `checkpoint.enabled: true` in config.yaml
- Check checkpoints.db was created
- Make sure you're in the same directory

**"Agent seems confused about project context"**
- Enable long-term memory: `memory.enabled: true`
- Give the agent time to build context in early phases
- Use clear, specific prompts

### Go/Build Issues

**"Cannot find package"**
- Run `go mod tidy`
- Ensure go.mod is in project root
- Check GOPATH is set correctly

**"Database locked"**
- Close any other SQLite connections
- Check for stray test processes: `ps aux | grep go`

## Next Steps

After completing this walkthrough:

1. **Extend the API**: Add user authentication, pagination, or filtering
2. **Try Other Languages**: Adapt this example to Python, TypeScript, or Rust
3. **Build Your Own Project**: Use GoCode on your actual work
4. **Contribute**: Share your experience or create new examples

## Resources

- [GoCode Documentation](../../README.md)
- [WALKTHROUGH.md](./WALKTHROUGH.md) - Start here!
- [initial-spec.md](./initial-spec.md) - Project requirements
- [Go Web Programming](https://golang.org/doc/articles/wiki/)
- [REST API Best Practices](https://restfulapi.net/)

## License

This example is part of the GoCode project and is licensed under the MIT License.

---

**Ready to start?** Open [WALKTHROUGH.md](./WALKTHROUGH.md) and begin Phase 1!
